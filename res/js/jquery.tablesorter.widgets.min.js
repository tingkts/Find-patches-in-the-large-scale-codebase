(function(e){"use strict";var t=e.tablesorter=e.tablesorter||{};t.themes={bootstrap:{table:"table table-bordered table-striped",caption:"caption",header:"bootstrap-header",footerRow:"",footerCells:"",icons:"",sortNone:"bootstrap-icon-unsorted",sortAsc:"icon-chevron-up glyphicon glyphicon-chevron-up",sortDesc:"icon-chevron-down glyphicon glyphicon-chevron-down",active:"",hover:"",filterRow:"",even:"",odd:""},jui:{table:"ui-widget ui-widget-content ui-corner-all",caption:"ui-widget-content ui-corner-all",header:"ui-widget-header ui-corner-all ui-state-default",footerRow:"",footerCells:"",icons:"ui-icon",sortNone:"ui-icon-carat-2-n-s",sortAsc:"ui-icon-carat-1-n",sortDesc:"ui-icon-carat-1-s",active:"ui-state-active",hover:"ui-state-hover",filterRow:"",even:"ui-widget-content",odd:"ui-state-default"}};e.extend(t.css,{filterRow:"tablesorter-filter-row",filter:"tablesorter-filter",wrapper:"tablesorter-wrapper",resizer:"tablesorter-resizer",sticky:"tablesorter-stickyHeader",stickyVis:"tablesorter-sticky-visible"});t.storage=function(t,n,r,i){t=e(t)[0];var s,o,u,a=false,f={},l=t.config,c=e(t),h=i&&i.id||c.attr(i&&i.group||"data-table-group")||t.id||e(".tablesorter").index(c),p=i&&i.url||c.attr(i&&i.page||"data-table-page")||l&&l.fixedUrl||window.location.pathname;if("localStorage"in window){try{window.localStorage.setItem("_tmptest","temp");a=true;window.localStorage.removeItem("_tmptest")}catch(d){}}if(e.parseJSON){if(a){f=e.parseJSON(localStorage[n]||"{}")}else{o=document.cookie.split(/[;\s|=]/);s=e.inArray(n,o)+1;f=s!==0?e.parseJSON(o[s]||"{}"):{}}}if((r||r==="")&&window.JSON&&JSON.hasOwnProperty("stringify")){if(!f[p]){f[p]={}}f[p][h]=r;if(a){localStorage[n]=JSON.stringify(f)}else{u=new Date;u.setTime(u.getTime()+31536e6);document.cookie=n+"="+JSON.stringify(f).replace(/\"/g,'"')+"; expires="+u.toGMTString()+"; path=/"}}else{return f&&f[p]?f[p][h]:""}};t.addHeaderResizeEvent=function(t,n,r){t=e(t)[0];var i,s={timer:250},o=e.extend({},s,r),u=t.config,a=u.widgetOptions,f=function(t){a.resize_flag=true;i=[];u.$headers.each(function(){var t=e(this),n=t.data("savedSizes")||[0,0],r=this.offsetWidth,s=this.offsetHeight;if(r!==n[0]||s!==n[1]){t.data("savedSizes",[r,s]);i.push(this)}});if(i.length&&t!==false){u.$table.trigger("resize",[i])}a.resize_flag=false};f(false);clearInterval(a.resize_timer);if(n){a.resize_flag=false;return false}a.resize_timer=setInterval(function(){if(a.resize_flag){return}f()},o.timer)};t.addWidget({id:"uitheme",priority:10,format:function(n,r,i){var s,o,u,a,f,l,c,h=t.themes,p=r.$table,d=r.$headers,v=r.theme||"jui",m=h[v]||h.jui,g=m.sortNone+" "+m.sortDesc+" "+m.sortAsc;if(r.debug){o=new Date}if(!p.hasClass("tablesorter-"+v)||r.theme===v||!n.hasInitialized){if(m.even!==""){i.zebra[0]+=" "+m.even}if(m.odd!==""){i.zebra[1]+=" "+m.odd}p.find("caption").addClass(m.caption);l=p.removeClass(r.theme===""?"":"tablesorter-"+r.theme).addClass("tablesorter-"+v+" "+m.table).find("tfoot");if(l.length){l.find("tr").addClass(m.footerRow).children("th, td").addClass(m.footerCells)}d.addClass(m.header).not(".sorter-false").bind("mouseenter.tsuitheme mouseleave.tsuitheme",function(t){e(this)[t.type==="mouseenter"?"addClass":"removeClass"](m.hover)});if(!d.find("."+t.css.wrapper).length){d.wrapInner('<div class="'+t.css.wrapper+'" style="position:relative;height:100%;width:100%"></div>')}if(r.cssIcon){d.find("."+t.css.icon).addClass(m.icons)}if(p.hasClass("hasFilters")){d.find("."+t.css.filterRow).addClass(m.filterRow)}}for(s=0;s<r.columns;s++){a=r.$headers.add(r.$extraHeaders).filter('[data-column="'+s+'"]');f=t.css.icon?a.find("."+t.css.icon):a;c=r.$headers.filter('[data-column="'+s+'"]:last');if(c.length){if(c[0].sortDisabled){a.removeClass(g);f.removeClass(g+" "+m.icons)}else{u=a.hasClass(t.css.sortAsc)?m.sortAsc:a.hasClass(t.css.sortDesc)?m.sortDesc:a.hasClass(t.css.header)?m.sortNone:"";a[u===m.sortNone?"removeClass":"addClass"](m.active);f.removeClass(g).addClass(u)}}}if(r.debug){t.benchmark("Applying "+v+" theme",o)}},remove:function(e,n,r){var i=n.$table,s=n.theme||"jui",o=t.themes[s]||t.themes.jui,u=i.children("thead").children(),a=o.sortNone+" "+o.sortDesc+" "+o.sortAsc;i.removeClass("tablesorter-"+s+" "+o.table).find(t.css.header).removeClass(o.header);u.unbind("mouseenter.tsuitheme mouseleave.tsuitheme").removeClass(o.hover+" "+a+" "+o.active).find("."+t.css.filterRow).removeClass(o.filterRow);u.find("."+t.css.icon).removeClass(o.icons)}});t.addWidget({id:"columns",priority:30,options:{columns:["primary","secondary","tertiary"]},format:function(n,r,i){var s,o,u,a,f,l,c,h,p,d=r.$table,v=r.$tbodies,m=r.sortList,g=m.length,y=i&&i.columns||["primary","secondary","tertiary"],b=y.length-1;h=y.join(" ");if(r.debug){s=new Date}for(u=0;u<v.length;u++){o=t.processTbody(n,v.eq(u),true);a=o.children("tr");a.each(function(){l=e(this);if(this.style.display!=="none"){c=l.children().removeClass(h);if(m&&m[0]){c.eq(m[0][0]).addClass(y[0]);if(g>1){for(p=1;p<g;p++){c.eq(m[p][0]).addClass(y[p]||y[b])}}}}});t.processTbody(n,o,false)}f=i.columns_thead!==false?["thead tr"]:[];if(i.columns_tfoot!==false){f.push("tfoot tr")}if(f.length){a=d.find(f.join(",")).children().removeClass(h);if(g){for(p=0;p<g;p++){a.filter('[data-column="'+m[p][0]+'"]').addClass(y[p]||y[b])}}}if(r.debug){t.benchmark("Applying Columns widget",s)}},remove:function(n,r,i){var s,o,u=r.$tbodies,a=(i.columns||["primary","secondary","tertiary"]).join(" ");r.$headers.removeClass(a);r.$table.children("tfoot").children("tr").children("th, td").removeClass(a);for(s=0;s<u.length;s++){o=t.processTbody(n,u.eq(s),true);o.children("tr").each(function(){e(this).children().removeClass(a)});t.processTbody(n,o,false)}}});t.addWidget({id:"filter",priority:50,options:{filter_childRows:false,filter_columnFilters:true,filter_cssFilter:"",filter_external:"",filter_filteredRow:"filtered",filter_formatter:null,filter_functions:null,filter_hideEmpty:true,filter_hideFilters:false,filter_ignoreCase:true,filter_liveSearch:true,filter_onlyAvail:"filter-onlyAvail",filter_placeholder:{search:"",select:""},filter_reset:null,filter_saveFilters:false,filter_searchDelay:300,filter_searchFiltered:true,filter_selectSource:null,filter_startsWith:false,filter_useParsedData:false,filter_serversideFiltering:false,filter_defaultAttrib:"data-value",filter_selectSourceSeparator:"|"},format:function(e,n,r){if(!n.$table.hasClass("hasFilters")){t.filter.init(e,n,r)}},remove:function(n,r,i){var s,o,u=r.$table,a=r.$tbodies;u.removeClass("hasFilters").unbind("addRows updateCell update updateRows updateComplete appendCache filterReset filterEnd search ".split(" ").join(r.namespace+"filter ")).find("."+t.css.filterRow).remove();for(s=0;s<a.length;s++){o=t.processTbody(n,a.eq(s),true);o.children().removeClass(i.filter_filteredRow).show();t.processTbody(n,o,false)}if(i.filter_reset){e(document).undelegate(i.filter_reset,"click.tsfilter")}}});t.filter={regex:{regex:/^\/((?:\\\/|[^\/])+)\/([mig]{0,3})?$/,child:/tablesorter-childRow/,filtered:/filtered/,type:/undefined|number/,exact:/(^[\"|\'|=]+)|([\"|\'|=]+$)/g,nondigit:/[^\w,. \-()]/g,operators:/[<>=]/g},types:{regex:function(e,n,r,i){if(t.filter.regex.regex.test(n)){var s,o=t.filter.regex.regex.exec(n);try{s=(new RegExp(o[1],o[2])).test(i)}catch(u){s=false}return s}return null},operators:function(n,r,i,s,o,u,a,f,l){if(/^[<>]=?/.test(r)){var c,h,p=a.config,d=t.formatFloat(r.replace(t.filter.regex.operators,""),a),v=p.parsers[u],m=d;if(l[u]||v.type==="numeric"){h=t.filter.parseFilter(a,e.trim(""+r.replace(t.filter.regex.operators,"")),u,l[u],true);d=typeof h==="number"&&h!==""&&!isNaN(h)?h:d}c=(l[u]||v.type==="numeric")&&!isNaN(d)&&typeof o!=="undefined"?o:isNaN(s)?t.formatFloat(s.replace(t.filter.regex.nondigit,""),a):t.formatFloat(s,a);if(/>/.test(r)){h=/>=/.test(r)?c>=d:c>d}if(/</.test(r)){h=/<=/.test(r)?c<=d:c<d}if(!h&&m===""){h=true}return h}return null},notMatch:function(n,r,i,s,o,u,a,f,l){if(/^\!/.test(r)){r=t.filter.parseFilter(a,r.replace("!",""),u,l[u]);if(t.filter.regex.exact.test(r)){r=r.replace(t.filter.regex.exact,"");return r===""?true:e.trim(r)!==s}else{var c=s.search(e.trim(r));return r===""?true:!(f.filter_startsWith?c===0:c>=0)}}return null},exact:function(n,r,i,s,o,u,a,f,l,c){if(t.filter.regex.exact.test(r)){var h=t.filter.parseFilter(a,r.replace(t.filter.regex.exact,""),u,l[u]);return c?e.inArray(h,c)>=0:h==s}return null},and:function(n,r,i,s,o,u,a,f,l){if(t.filter.regex.andTest.test(n)){var c=r.split(t.filter.regex.andSplit),h=s.search(e.trim(t.filter.parseFilter(a,c[0],u,l[u])))>=0,p=c.length-1;while(h&&p){h=h&&s.search(e.trim(t.filter.parseFilter(a,c[p],u,l[u])))>=0;p--}return h}return null},range:function(e,n,r,i,s,o,u,a,f){if(t.filter.regex.toTest.test(n)){var l,c,h=u.config,p=n.split(t.filter.regex.toSplit),d=t.formatFloat(t.filter.parseFilter(u,p[0].replace(t.filter.regex.nondigit,""),o,f[o]),u),v=t.formatFloat(t.filter.parseFilter(u,p[1].replace(t.filter.regex.nondigit,""),o,f[o]),u);if(f[o]||h.parsers[o].type==="numeric"){l=h.parsers[o].format(""+p[0],u,h.$headers.eq(o),o);d=l!==""&&!isNaN(l)?l:d;l=h.parsers[o].format(""+p[1],u,h.$headers.eq(o),o);v=l!==""&&!isNaN(l)?l:v}l=(f[o]||h.parsers[o].type==="numeric")&&!isNaN(d)&&!isNaN(v)?s:isNaN(i)?t.formatFloat(i.replace(t.filter.regex.nondigit,""),u):t.formatFloat(i,u);if(d>v){c=d;d=v;v=c}return l>=d&&l<=v||d===""||v===""}return null},wild:function(n,r,i,s,o,u,a,f,l,c){if(/[\?|\*]/.test(r)||t.filter.regex.orReplace.test(n)){var h=a.config,p=t.filter.parseFilter(a,r.replace(t.filter.regex.orReplace,"|"),u,l[u]);if(!h.$headers.filter('[data-column="'+u+'"]:last').hasClass("filter-match")&&/\|/.test(p)){p=e.isArray(c)?"("+p+")":"^("+p+")$"}return(new RegExp(p.replace(/\?/g,"\\S{1}").replace(/\*/g,"\\S*"))).test(s)}return null},fuzzy:function(e,n,r,i,s,o,u,a,f){if(/^~/.test(n)){var l,c=0,h=i.length,p=t.filter.parseFilter(u,n.slice(1),o,f[o]);for(l=0;l<h;l++){if(i[l]===p[c]){c+=1}}if(c===p.length){return true}return false}return null}},init:function(n,r,i){t.language=e.extend(true,{},{to:"to",or:"or",and:"and"},t.language);var s,o,u,a,f,l,c,h,p,d,v=t.filter.regex;if(r.debug){h=new Date}r.$table.addClass("hasFilters");i.searchTimer=null;i.filter_initTimer=null;i.filter_formatterCount=0;i.filter_formatterInit=[];e.extend(v,{child:new RegExp(r.cssChildRow),filtered:new RegExp(i.filter_filteredRow),alreadyFiltered:new RegExp("(\\s+("+t.language.or+"|-|"+t.language.to+")\\s+)","i"),toTest:new RegExp("\\s+(-|"+t.language.to+")\\s+","i"),toSplit:new RegExp("(?:\\s+(?:-|"+t.language.to+")\\s+)","gi"),andTest:new RegExp("\\s+("+t.language.and+"|&&)\\s+","i"),andSplit:new RegExp("(?:\\s+(?:"+t.language.and+"|&&)\\s+)","gi"),orReplace:new RegExp("\\s+("+t.language.or+")\\s+","gi")});if(i.filter_columnFilters!==false&&r.$headers.filter(".filter-false, .parser-false").length!==r.$headers.length){t.filter.buildRow(n,r,i)}r.$table.bind("addRows updateCell update updateRows updateComplete appendCache filterReset filterEnd search ".split(" ").join(r.namespace+"filter "),function(s,o){r.$table.find("."+t.css.filterRow).toggle(!(i.filter_hideEmpty&&e.isEmptyObject(r.cache)&&!(r.delayInit&&s.type==="appendCache")));if(!/(search|filter)/.test(s.type)){s.stopPropagation();t.filter.buildDefault(n,true)}if(s.type==="filterReset"){r.$table.find("."+t.css.filter).add(i.filter_$externalFilters).val("");t.filter.searching(n,[])}else if(s.type==="filterEnd"){t.filter.buildDefault(n,true)}else{o=s.type==="search"?o:s.type==="updateComplete"?r.$table.data("lastSearch"):"";if(/(update|add)/.test(s.type)&&s.type!=="updateComplete"){r.lastCombinedFilter=null;r.lastSearch=[]}t.filter.searching(n,o,true)}return false});if(i.filter_reset){if(i.filter_reset instanceof e){i.filter_reset.click(function(){r.$table.trigger("filterReset")})}else if(e(i.filter_reset).length){e(document).undelegate(i.filter_reset,"click.tsfilter").delegate(i.filter_reset,"click.tsfilter",function(){r.$table.trigger("filterReset")})}}if(i.filter_functions){for(f=0;f<r.columns;f++){p=t.getColumnData(n,i.filter_functions,f);if(p){a=r.$headers.filter('[data-column="'+f+'"]:last').removeClass("filter-select");d=!(a.hasClass("filter-false")||a.hasClass("parser-false"));s="";if(p===true&&d){t.filter.buildSelect(n,f)}else if(typeof p==="object"&&d){for(o in p){if(typeof o==="string"){s+=s===""?'<option value="">'+(a.data("placeholder")||a.attr("data-placeholder")||i.filter_placeholder.select||"")+"</option>":"";c=o;u=o;if(o.indexOf(i.filter_selectSourceSeparator)>=0){c=o.split(i.filter_selectSourceSeparator);u=c[1];c=c[0]}s+="<option "+(u===c?"":'data-function-name="'+o+'" ')+'value="'+c+'">'+u+"</option>"}}r.$table.find("thead").find("select."+t.css.filter+'[data-column="'+f+'"]').append(s)}}}}t.filter.buildDefault(n,true);t.filter.bindSearch(n,r.$table.find("."+t.css.filter),true);if(i.filter_external){t.filter.bindSearch(n,i.filter_external)}if(i.filter_hideFilters){t.filter.hideFilters(n,r)}if(r.showProcessing){r.$table.bind("filterStart"+r.namespace+"filter filterEnd"+r.namespace+"filter",function(i,s){a=s?r.$table.find("."+t.css.header).filter("[data-column]").filter(function(){return s[e(this).data("column")]!==""}):"";t.isProcessing(n,i.type==="filterStart",s?a:"")})}r.filteredRows=r.totalRows;if(r.debug){t.benchmark("Applying Filter widget",h)}r.$table.bind("tablesorter-initialized pagerInitialized",function(){var e=this.config.widgetOptions;l=t.filter.setDefaults(n,r,e)||[];if(l.length){if(!(r.delayInit&&l.join("")==="")){t.setFilters(n,l,true)}}r.$table.trigger("filterFomatterUpdate");setTimeout(function(){if(!e.filter_initialized){t.filter.filterInitComplete(r)}},100)});if(r.pager&&r.pager.initialized&&!i.filter_initialized){r.$table.trigger("filterFomatterUpdate");setTimeout(function(){t.filter.filterInitComplete(r)},100)}},formatterUpdated:function(e,t){var n=e.closest("table")[0].config.widgetOptions;if(!n.filter_initialized){n.filter_formatterInit[t]=1}},filterInitComplete:function(t){var n=t.widgetOptions,r=0;e.each(n.filter_formatterInit,function(e,t){if(t===1){r++}});clearTimeout(n.filter_initTimer);if(!n.filter_initialized&&r===n.filter_formatterCount){n.filter_initialized=true;t.$table.trigger("filterInit",t)}else if(!n.filter_initialized){n.filter_initTimer=setTimeout(function(){n.filter_initialized=true;t.$table.trigger("filterInit",t)},500)}},setDefaults:function(n,r,i){var s,o,u,a=t.getFilters(n)||[];if(i.filter_saveFilters&&t.storage){o=t.storage(n,"tablesorter-filters")||[];s=e.isArray(o);if(!(s&&o.join("")===""||!s)){a=o}}if(a.join("")===""){for(u=0;u<r.columns;u++){a[u]=r.$headers.filter('[data-column="'+u+'"]:last').attr(i.filter_defaultAttrib)||a[u]}}r.$table.data("lastSearch",a);return a},parseFilter:function(e,t,n,r,i){var s=e.config;return i||r?s.parsers[n].format(t,e,[],n):t},buildRow:function(n,r,i){var s,o,u,a,f,l,c,h=r.columns,p='<tr role="row" class="'+t.css.filterRow+'">';for(o=0;o<h;o++){p+="<td></td>"}r.$filters=e(p+="</tr>").appendTo(r.$table.children("thead").eq(0)).find("td");for(o=0;o<h;o++){f=false;u=r.$headers.filter('[data-column="'+o+'"]:last');c=t.getColumnData(n,i.filter_functions,o);a=i.filter_functions&&c&&typeof c!=="function"||u.hasClass("filter-select");s=t.getColumnData(n,r.headers,o);f=t.getData(u[0],s,"filter")==="false"||t.getData(u[0],s,"parser")==="false";if(a){p=e("<select>").appendTo(r.$filters.eq(o))}else{c=t.getColumnData(n,i.filter_formatter,o);if(c){i.filter_formatterCount++;p=c(r.$filters.eq(o),o);if(p&&p.length===0){p=r.$filters.eq(o).children("input")}if(p&&(p.parent().length===0||p.parent().length&&p.parent()[0]!==r.$filters[o])){r.$filters.eq(o).append(p)}}else{p=e('<input type="search">').appendTo(r.$filters.eq(o))}if(p){p.attr("placeholder",u.data("placeholder")||u.attr("data-placeholder")||i.filter_placeholder.search||"")}}if(p){l=(e.isArray(i.filter_cssFilter)?typeof i.filter_cssFilter[o]!=="undefined"?i.filter_cssFilter[o]||"":"":i.filter_cssFilter)||"";p.addClass(t.css.filter+" "+l).attr("data-column",o);if(f){p.attr("placeholder","").addClass("disabled")[0].disabled=true}}}},bindSearch:function(n,r,i){n=e(n)[0];r=e(r);if(!r.length){return}var s=n.config,o=s.widgetOptions,u=o.filter_$externalFilters;if(i!==true){o.filter_$anyMatch=r.filter('[data-column="all"]');if(u&&u.length){o.filter_$externalFilters=o.filter_$externalFilters.add(r)}else{o.filter_$externalFilters=r}t.setFilters(n,s.$table.data("lastSearch")||[],i===false)}r.attr("data-lastSearchTime",(new Date).getTime()).unbind("keypress keyup search change ".split(" ").join(s.namespace+"filter ")).bind("keyup"+s.namespace+"filter",function(r){e(this).attr("data-lastSearchTime",(new Date).getTime());if(r.which===27){this.value=""}else if(o.filter_liveSearch===false){return}else if(this.value!==""&&(typeof o.filter_liveSearch==="number"&&this.value.length<o.filter_liveSearch||r.which!==13&&r.which!==8&&(r.which<32||r.which>=37&&r.which<=40))){return}t.filter.searching(n,true,true)}).bind("search change keypress ".split(" ").join(s.namespace+"filter "),function(r){var i=e(this).data("column");if(r.which===13||r.type==="search"||r.type==="change"&&this.value!==s.lastSearch[i]){r.preventDefault();e(this).attr("data-lastSearchTime",(new Date).getTime());t.filter.searching(n,false,true)}})},searching:function(e,n,r){var i=e.config.widgetOptions;clearTimeout(i.searchTimer);if(typeof n==="undefined"||n===true){i.searchTimer=setTimeout(function(){t.filter.checkFilters(e,n,r)},i.filter_liveSearch?i.filter_searchDelay:10)}else{t.filter.checkFilters(e,n,r)}},checkFilters:function(n,r,i){var s=n.config,o=s.widgetOptions,u=e.isArray(r),a=u?r:t.getFilters(n,true),f=(a||[]).join("");if(e.isEmptyObject(s.cache)){if(s.delayInit&&s.pager&&s.pager.initialized){s.$table.trigger("updateCache",[function(){t.filter.checkFilters(n,false,i)}])}return}if(u){t.setFilters(n,a,false,i!==true);if(!o.filter_initialized){s.lastCombinedFilter=""}}if(o.filter_hideFilters){s.$table.find("."+t.css.filterRow).trigger(f===""?"mouseleave":"mouseenter")}if(s.lastCombinedFilter===f&&r!==false){return}else if(r===false){s.lastCombinedFilter=null;s.lastSearch=[]}if(o.filter_initialized){s.$table.trigger("filterStart",[a])}if(s.showProcessing){setTimeout(function(){t.filter.findRows(n,a,f);return false},30)}else{t.filter.findRows(n,a,f);return false}},hideFilters:function(n,r){var i,s,o;e(n).find("."+t.css.filterRow).addClass("hideme").bind("mouseenter mouseleave",function(t){var s=t;i=e(this);clearTimeout(o);o=setTimeout(function(){if(/enter|over/.test(s.type)){i.removeClass("hideme");e(n).css("background-color","#fefefe")}else{if(e(document.activeElement).closest("tr")[0]!==i[0]){if(r.lastCombinedFilter===""){i.addClass("hideme");e(n).css("background-color","")}}}},200)}).find("input, select").bind("focus blur",function(i){s=e(this).closest("tr");clearTimeout(o);var u=i;o=setTimeout(function(){if(t.getFilters(r.$table).join("")===""){s[u.type==="focus"?"removeClass":"addClass"]("hideme");e(n).css("background-color",u.type==="focus"?"#fefefe":"")}},200)})},findRows:function(n,r,i){if(n.config.lastCombinedFilter===i){return}var s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B=t.filter.regex,j=n.config,F=j.widgetOptions,I=j.columns,q=j.$table.children("tbody"),R=["range","notMatch","operators"],U=j.$headers.map(function(r){return j.parsers&&j.parsers[r]&&j.parsers[r].parsed||t.getData&&t.getData(j.$headers.filter('[data-column="'+r+'"]:last'),t.getColumnData(n,j.headers,r),"filter")==="parsed"||e(this).hasClass("filter-parsed")}).get();if(j.debug){N=new Date}j.filteredRows=0;j.totalRows=0;for(f=0;f<q.length;f++){if(q.eq(f).hasClass(j.cssInfoBlock||t.css.info)){continue}l=t.processTbody(n,q.eq(f),true);h=j.columns;u=e(e.map(j.cache[f].normalized,function(e){return e[h].$row.get()}));if(i===""||F.filter_serversideFiltering){u.removeClass(F.filter_filteredRow).not("."+j.cssChildRow).show()}else{u=u.not("."+j.cssChildRow);o=u.length;S=F.filter_searchFiltered;y=j.lastSearch||j.$table.data("lastSearch")||[];if(S){for(k=0;k<h+1;k++){C=r[k]||"";if(!S){k=h}S=S&&y.length&&C.indexOf(y[k]||"")===0&&!B.alreadyFiltered.test(C)&&!/[=\"\|!]/.test(C)&&!(/(>=?\s*-\d)/.test(C)||/(<=?\s*\d)/.test(C))&&!(C!==""&&j.$filters&&j.$filters.eq(k).find("select").length&&!j.$headers.filter('[data-column="'+k+'"]:last').hasClass("filter-match"))}}E=u.not("."+F.filter_filteredRow).length;if(S&&E===0){S=false}if(j.debug){t.log("Searching through "+(S&&E<o?E:"all")+" rows")}if(F.filter_$anyMatch&&F.filter_$anyMatch.length||r[j.columns]){L=F.filter_$anyMatch&&F.filter_$anyMatch.val()||r[j.columns]||"";if(j.sortLocaleCompare){L=t.replaceAccents(L)}A=L.toLowerCase()}for(a=0;a<o;a++){p=u[a].className;if(B.child.test(p)||S&&B.filtered.test(p)){continue}T=true;p=u.eq(a).nextUntil("tr:not(."+j.cssChildRow+")");d=p.length&&F.filter_childRows?p.text():"";d=F.filter_ignoreCase?d.toLocaleLowerCase():d;c=u.eq(a).children();if(L){O=c.map(function(n){var r;if(U[n]){r=j.cache[f].normalized[a][n]}else{r=F.filter_ignoreCase?e(this).text().toLowerCase():e(this).text();if(j.sortLocaleCompare){r=t.replaceAccents(r)}}return r}).get();M=O.join(" ");_=M.toLowerCase();D=j.cache[f].normalized[a].slice(0,-1).join(" ");x=null;e.each(t.filter.types,function(t,r){if(e.inArray(t,R)<0){b=r(L,A,M,_,D,I,n,F,U,O);if(b!==null){x=b;return false}}});if(x!==null){T=x}else{if(F.filter_startsWith){T=false;h=I;while(!T&&h>0){h--;T=T||O[h].indexOf(A)===0}}else{T=(_+d).indexOf(A)>=0}}}for(h=0;h<I;h++){if(r[h]){s=j.cache[f].normalized[a][h];if(F.filter_useParsedData||U[h]){v=s}else{v=e.trim(c.eq(h).text());v=j.sortLocaleCompare?t.replaceAccents(v):v}m=!B.type.test(typeof v)&&F.filter_ignoreCase?v.toLocaleLowerCase():v;w=T;H=j.$filters.eq(h).find("select option:selected").attr("data-function-name")||"";r[h]=j.sortLocaleCompare?t.replaceAccents(r[h]):r[h];g=F.filter_ignoreCase?(r[h]||"").toLocaleLowerCase():r[h];P=t.getColumnData(n,F.filter_functions,h);if(P){if(P===true){w=j.$headers.filter('[data-column="'+h+'"]:last').hasClass("filter-match")?m.search(g)>=0:r[h]===v}else if(typeof P==="function"){w=P(v,s,r[h],h,u.eq(a))}else if(typeof P[H||r[h]]==="function"){w=P[H||r[h]](v,s,r[h],h,u.eq(a))}}else{x=null;e.each(t.filter.types,function(e,t){b=t(r[h],g,v,m,s,h,n,F,U);if(b!==null){x=b;return false}});if(x!==null){w=x}else{v=(m+d).indexOf(t.filter.parseFilter(n,g,h,U[h]));w=!F.filter_startsWith&&v>=0||F.filter_startsWith&&v===0}}T=w?T:false}}u.eq(a).toggle(T).toggleClass(F.filter_filteredRow,!T);if(p.length){p.toggleClass(F.filter_filteredRow,!T)}}}j.filteredRows+=u.not("."+F.filter_filteredRow).length;j.totalRows+=u.length;t.processTbody(n,l,false)}j.lastCombinedFilter=i;j.lastSearch=r;j.$table.data("lastSearch",r);if(F.filter_saveFilters&&t.storage){t.storage(n,"tablesorter-filters",r)}if(j.debug){t.benchmark("Completed filter widget search",N)}if(F.filter_initialized){j.$table.trigger("filterEnd",j)}setTimeout(function(){j.$table.trigger("applyWidgets")},0)},getOptionSource:function(n,r,i){var s,o=n.config,u=o.widgetOptions,a=[],f=false,l=u.filter_selectSource,c=o.$table.data("lastSearch")||[],h=e.isFunction(l)?true:t.getColumnData(n,l,r);if(i&&c[r]!==""){i=false}if(h===true){f=l(n,r,i)}else if(h instanceof e||e.type(h)==="string"&&h.indexOf("</option>")>=0){return h}else if(e.isArray(h)){f=h}else if(e.type(l)==="object"&&h){f=h(n,r,i)}if(f===false){f=t.filter.getOptions(n,r,i)}f=e.grep(f,function(t,n){return e.inArray(t,f)===n});if(o.$headers.filter('[data-column="'+r+'"]:last').hasClass("filter-select-nosort")){return f}else{e.each(f,function(e,t){a.push({t:t,p:o.parsers&&o.parsers[r].format(t,n,[],r)})});s=o.textSorter||"";a.sort(function(i,o){var u=i.p.toString(),a=o.p.toString();if(e.isFunction(s)){return s(u,a,true,r,n)}else if(typeof s==="object"&&s.hasOwnProperty(r)){return s[r](u,a,true,r,n)}else if(t.sortNatural){return t.sortNatural(u,a)}return true});f=[];e.each(a,function(e,t){f.push(t.t)});return f}},getOptions:function(t,n,r){var i,s,o,u,a,f,l=t.config,c=l.widgetOptions,h=l.$table.children("tbody"),p=[];for(s=0;s<h.length;s++){if(!h.eq(s).hasClass(l.cssInfoBlock)){a=l.cache[s];o=l.cache[s].normalized.length;for(i=0;i<o;i++){u=a.row?a.row[i]:a.normalized[i][l.columns].$row[0];if(r&&u.className.match(c.filter_filteredRow)){continue}if(c.filter_useParsedData||l.parsers[n].parsed||l.$headers.filter('[data-column="'+n+'"]:last').hasClass("filter-parsed")){p.push(""+a.normalized[i][n])}else{f=u.cells[n];if(f){p.push(e.trim(f.textContent||f.innerText||e(f).text()))}}}}}return p},buildSelect:function(n,r,i,s,o){n=e(n)[0];r=parseInt(r,10);if(!n.config.cache||e.isEmptyObject(n.config.cache)){return}var u,a,f,l,c,h,p=n.config,d=p.widgetOptions,v=p.$headers.filter('[data-column="'+r+'"]:last'),m='<option value="">'+(v.data("placeholder")||v.attr("data-placeholder")||d.filter_placeholder.select||"")+"</option>",g=p.$table.find("thead").find("select."+t.css.filter+'[data-column="'+r+'"]').val();if(typeof i==="undefined"||i===""){i=t.filter.getOptionSource(n,r,o)}if(e.isArray(i)){for(u=0;u<i.length;u++){f=i[u]=(""+i[u]).replace(/\"/g,"&quot;");a=f;if(f.indexOf(d.filter_selectSourceSeparator)>=0){l=f.split(d.filter_selectSourceSeparator);a=l[0];f=l[1]}m+=i[u]!==""?"<option "+(a===f?"":'data-function-name="'+i[u]+'" ')+'value="'+a+'">'+f+"</option>":""}i=[]}c=(p.$filters?p.$filters:p.$table.children("thead")).find("."+t.css.filter);if(d.filter_$externalFilters){c=c&&c.length?c.add(d.filter_$externalFilters):d.filter_$externalFilters}h=c.filter('select[data-column="'+r+'"]');if(h.length){h[s?"html":"append"](m);if(!e.isArray(i)){h.append(i).val(g)}h.val(g)}},buildDefault:function(e,n){var r,i,s,o=e.config,u=o.widgetOptions,a=o.columns;for(r=0;r<a;r++){i=o.$headers.filter('[data-column="'+r+'"]:last');s=!(i.hasClass("filter-false")||i.hasClass("parser-false"));if((i.hasClass("filter-select")||t.getColumnData(e,u.filter_functions,r)===true)&&s){t.filter.buildSelect(e,r,"",n,i.hasClass(u.filter_onlyAvail))}}}};t.getFilters=function(n,r,i,s){var o,u,a,f=false,l=n?e(n)[0].config:"",c=l?l.widgetOptions:"";if(r!==true&&c&&!c.filter_columnFilters){return e(n).data("lastSearch")}if(l){if(l.$filters){u=l.$filters.find("."+t.css.filter)}if(c.filter_$externalFilters){u=u&&u.length?u.add(c.filter_$externalFilters):c.filter_$externalFilters}if(u&&u.length){f=i||[];for(o=0;o<l.columns+1;o++){a=u.filter('[data-column="'+(o===l.columns?"all":o)+'"]');if(a.length){a=a.sort(function(t,n){return e(n).attr("data-lastSearchTime")-e(t).attr("data-lastSearchTime")});if(e.isArray(i)){(s?a.slice(1):a).val(i[o]).trigger("change.tsfilter")}else{f[o]=a.val()||"";a.slice(1).val(f[o])}if(o===l.columns&&a.length){c.filter_$anyMatch=a}}}}}if(f.length===0){f=false}return f};t.setFilters=function(n,r,i,s){var o=n?e(n)[0].config:"",u=t.getFilters(n,true,r,s);if(o&&i){o.lastCombinedFilter=null;o.lastSearch=[];t.filter.searching(o.$table[0],r,s);o.$table.trigger("filterFomatterUpdate")}return!!u};t.addWidget({id:"stickyHeaders",priority:60,options:{stickyHeaders:"",stickyHeaders_attachTo:null,stickyHeaders_offset:0,stickyHeaders_filteredToTop:true,stickyHeaders_cloneId:"-sticky",stickyHeaders_addResizeEvent:true,stickyHeaders_includeCaption:true,stickyHeaders_zIndex:2},format:function(n,r,i){if(r.$table.hasClass("hasStickyHeaders")||e.inArray("filter",r.widgets)>=0&&!r.$table.hasClass("hasFilters")){return}var s=r.$table,o=e(i.stickyHeaders_attachTo),u=s.children("thead:first"),a=o.length?o:e(window),f=u.children("tr").not(".sticky-false").children(),l="."+t.css.headerIn,c=s.find("tfoot"),h=isNaN(i.stickyHeaders_offset)?e(i.stickyHeaders_offset):"",p=o.length?0:h.length?h.height()||0:parseInt(i.stickyHeaders_offset,10)||0,d=i.$sticky=s.clone().addClass("containsStickyHeaders").css({position:o.length?"absolute":"fixed",margin:0,top:p,left:0,visibility:"hidden",zIndex:i.stickyHeaders_zIndex?i.stickyHeaders_zIndex:2}),v=d.children("thead:first").addClass(t.css.sticky+" "+i.stickyHeaders),m,g="",y=0,b=s.css("border-collapse")!=="collapse"&&!/(webkit|msie)/i.test(navigator.userAgent),w=function(){p=h.length?h.height()||0:parseInt(i.stickyHeaders_offset,10)||0;y=0;if(b){y=parseInt(f.eq(0).css("border-left-width"),10)*2}d.css({left:o.length?(parseInt(o.css("padding-left"),10)||0)+parseInt(r.$table.css("padding-left"),10)+parseInt(r.$table.css("margin-left"),10)+parseInt(s.css("border-left-width"),10):u.offset().left-a.scrollLeft()-y,width:s.width()});m.filter(":visible").each(function(t){var n=f.filter(":visible").eq(t),i=b&&e(this).attr("data-column")===""+parseInt(r.columns/2,10)?1:0;e(this).css({width:n.width()-y}).find(l).width(n.find(l).width()-i)})};if(d.attr("id")){d[0].id+=i.stickyHeaders_cloneId}d.find("thead:gt(0), tr.sticky-false").hide();d.find("tbody, tfoot").remove();if(!i.stickyHeaders_includeCaption){d.find("caption").remove()}else{d.find("caption").css("margin-left","-1px")}m=v.children().children();d.css({height:0,width:0,padding:0,margin:0,border:0});m.find("."+t.css.resizer).remove();s.addClass("hasStickyHeaders").bind("pagerComplete.tsSticky",function(){w()});t.bindEvents(n,v.children().children(".tablesorter-header"));s.after(d);a.bind("scroll.tsSticky resize.tsSticky",function(e){if(!s.is(":visible")){return}var t="tablesorter-sticky-",n=s.offset(),r=i.stickyHeaders_includeCaption?0:s.find("caption").outerHeight(true),f=(o.length?o.offset().top:a.scrollTop())+p-r,l=s.height()-(d.height()+(c.height()||0)),h=f>n.top&&f<n.top+l?"visible":"hidden",v={visibility:h};if(o.length){v.top=o.scrollTop()}else{v.left=u.offset().left-a.scrollLeft()-y}d.removeClass(t+"visible "+t+"hidden").addClass(t+h).css(v);if(h!==g||e.type==="resize"){w();g=h}});if(i.stickyHeaders_addResizeEvent){t.addHeaderResizeEvent(n)}if(s.hasClass("hasFilters")){s.bind("filterEnd",function(){var n=e(document.activeElement).closest("td"),o=n.parent().children().index(n);if(d.hasClass(t.css.stickyVis)&&i.stickyHeaders_filteredToTop){window.scrollTo(0,s.position().top);if(o>=0&&r.$filters){r.$filters.eq(o).find("a, select, input").filter(":visible").focus()}}});t.filter.bindSearch(s,m.find("."+t.css.filter));if(i.filter_hideFilters){t.filter.hideFilters(d,r)}}s.trigger("stickyHeadersInit")},remove:function(n,r,i){r.$table.removeClass("hasStickyHeaders").unbind("pagerComplete.tsSticky").find("."+t.css.sticky).remove();if(i.$sticky&&i.$sticky.length){i.$sticky.remove()}if(!e(".hasStickyHeaders").length){e(window).unbind("scroll.tsSticky resize.tsSticky")}t.addHeaderResizeEvent(n,false)}});t.addWidget({id:"resizable",priority:40,options:{resizable:true,resizable_addLastColumn:false,resizable_widths:[],resizable_throttle:false},format:function(n,r,i){if(r.$table.hasClass("hasResizable")){return}r.$table.addClass("hasResizable");t.resizableReset(n,true);var s,o,u,a,f,l={},c=r.$table,h=0,p=null,d=null,v=Math.abs(c.parent().width()-c.width())<20,m=function(e){if(h===0||!p){return}var t=e.pageX-h,n=p.width();p.width(n+t);if(p.width()!==n&&v){d.width(d.width()-t)}h=e.pageX},g=function(){if(t.storage&&p&&d){l={};l[p.index()]=p.width();l[d.index()]=d.width();p.width(l[p.index()]);d.width(l[d.index()]);if(i.resizable!==false){t.storage(n,"tablesorter-resizable",r.$headers.map(function(){return e(this).width()}).get())}}h=0;p=d=null;e(window).trigger("resize")};l=t.storage&&i.resizable!==false?t.storage(n,"tablesorter-resizable"):{};if(l){for(a in l){if(!isNaN(a)&&a<r.$headers.length){r.$headers.eq(a).width(l[a])}}}s=c.children("thead:first").children("tr");s.children().each(function(){var i,o=e(this);a=o.attr("data-column");i=t.getData(o,t.getColumnData(n,r.headers,a),"resizable")==="false";s.children().filter('[data-column="'+a+'"]')[i?"addClass":"removeClass"]("resizable-false")});s.each(function(){u=e(this).children().not(".resizable-false");if(!e(this).find("."+t.css.wrapper).length){u.wrapInner('<div class="'+t.css.wrapper+'" style="position:relative;height:100%;width:100%"></div>')}if(!i.resizable_addLastColumn){u=u.slice(0,-1)}o=o?o.add(u):u});o.each(function(){var n=e(this),r=parseInt(n.css("padding-right"),10)+10;n.find("."+t.css.wrapper).append('<div class="'+t.css.resizer+'" style="cursor:w-resize;position:absolute;z-index:1;right:-'+r+'px;top:0;height:100%;width:20px;"></div>')}).find("."+t.css.resizer).bind("mousedown",function(t){p=e(t.target).closest("th");var n=r.$headers.filter('[data-column="'+p.attr("data-column")+'"]');if(n.length>1){p=p.add(n)}d=t.shiftKey?p.parent().find("th").not(".resizable-false").filter(":last"):p.nextAll(":not(.resizable-false)").eq(0);h=t.pageX});e(document).bind("mousemove.tsresize",function(e){if(h===0||!p){return}if(i.resizable_throttle){clearTimeout(f);f=setTimeout(function(){m(e)},isNaN(i.resizable_throttle)?5:i.resizable_throttle)}else{m(e)}}).bind("mouseup.tsresize",function(){g()});c.find("thead:first").bind("contextmenu.tsresize",function(){t.resizableReset(n);var r=e.isEmptyObject?e.isEmptyObject(l):true;l={};return r})},remove:function(e,n){n.$table.removeClass("hasResizable").children("thead").unbind("mouseup.tsresize mouseleave.tsresize contextmenu.tsresize").children("tr").children().unbind("mousemove.tsresize mouseup.tsresize").find("."+t.css.resizer).remove();t.resizableReset(e)}});t.resizableReset=function(n,r){e(n).each(function(){var i,s=this.config,o=s&&s.widgetOptions;if(n&&s){s.$headers.each(function(t){i=e(this);if(o.resizable_widths[t]){i.css("width",o.resizable_widths[t])}else if(!i.hasClass("resizable-false")){i.css("width","")}});if(t.storage&&!r){t.storage(this,"tablesorter-resizable",{})}}})};t.addWidget({id:"saveSort",priority:20,options:{saveSort:true},init:function(e,t,n,r){t.format(e,n,r,true)},format:function(n,r,i,s){var o,u,a=r.$table,f=i.saveSort!==false,l={sortList:r.sortList};if(r.debug){u=new Date}if(a.hasClass("hasSaveSort")){if(f&&n.hasInitialized&&t.storage){t.storage(n,"tablesorter-savesort",l);if(r.debug){t.benchmark("saveSort widget: Saving last sort: "+r.sortList,u)}}}else{a.addClass("hasSaveSort");l="";if(t.storage){o=t.storage(n,"tablesorter-savesort");l=o&&o.hasOwnProperty("sortList")&&e.isArray(o.sortList)?o.sortList:"";if(r.debug){t.benchmark('saveSort: Last sort loaded: "'+l+'"',u)}a.bind("saveSortReset",function(e){e.stopPropagation();t.storage(n,"tablesorter-savesort","")})}if(s&&l&&l.length>0){r.sortList=l}else if(n.hasInitialized&&l&&l.length>0){a.trigger("sorton",[l])}}},remove:function(e){if(t.storage){t.storage(e,"tablesorter-savesort","")}}})})(jQuery)